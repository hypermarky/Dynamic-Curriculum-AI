import{r as w,c as a,o,a as e,t as d,p as D,d as y,w as v,e as b,_ as k,g as h,q as E,n as x,u as i,F as L,s as V,k as C,m as P,T as M,x as A}from"./index-Cm3Rla8a.js";import{u as N}from"./employeeStore-CWFifNve.js";import{_ as S}from"./EmployeeForm-DU3fjp25.js";const $={class:"card-intellipath p-5 space-y-3 flex flex-col justify-between"},j={class:"text-lg font-semibold text-sky-400 truncate"},B={class:"text-sm text-slate-400 truncate"},I={class:"mt-2 text-xs"},T={class:"mt-4"},z={__name:"EmployeeListItem",props:{employee:{type:Object,required:!0}},setup(m){const s=l=>{switch(l){case"draft":return"bg-yellow-500/20 text-yellow-400";case"assigned":return"bg-blue-500/20 text-blue-400";case"in_progress":return"bg-sky-500/20 text-sky-400";case"completed":return"bg-emerald-500/20 text-emerald-400";default:return"bg-slate-700 text-slate-400"}};return(l,n)=>{var c,p;const u=w("router-link");return o(),a("div",$,[e("div",null,[e("h3",j,d(m.employee.name),1),e("p",B,d(m.employee.current_role||"No role specified"),1),e("div",I,[n[0]||(n[0]=e("span",{class:"font-medium text-slate-500"},"Path Status: ",-1)),e("span",{class:D([s((c=m.employee.learningPath)==null?void 0:c.status),"px-2 py-0.5 rounded-full font-semibold"])},d(((p=m.employee.learningPath)==null?void 0:p.status)||"Not Generated"),3)])]),e("div",T,[y(u,{to:{name:"EmployeeDetail",params:{id:m.employee.id}},class:"btn-intellipath-secondary w-full !py-2 text-sm"},{default:v(()=>n[1]||(n[1]=[b(" View Details & Path ")])),_:1,__:[1]},8,["to"])])])}}},F={class:"p-4 md:p-8 space-y-8"},q={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},O={class:"card-intellipath p-6 transform hover:scale-105 transition-transform duration-300"},G={class:"mt-1 text-4xl font-semibold text-sky-400"},H={class:"card-intellipath p-6 transform hover:scale-105 transition-transform duration-300"},J={class:"mt-1 text-4xl font-semibold text-teal-400"},K={class:"card-intellipath p-6 transform hover:scale-105 transition-transform duration-300"},Q={class:"mt-1 text-4xl font-semibold text-emerald-400"},R={key:0,class:"card-intellipath p-10 text-center"},U={key:1,class:"card-intellipath p-6 text-red-400 bg-red-900/30"},W={key:2,class:"card-intellipath p-10 text-center"},X={key:3,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},Y={class:"card-intellipath w-full max-w-lg p-6 md:p-8 transform transition-all duration-300 ease-out",role:"dialog","aria-modal":"true","aria-labelledby":"add-employee-modal-title"},Z={__name:"LDDashboardView",setup(m){const s=N(),l=h(!1),n=h(!1);E(async()=>{console.log("LDDashboardView: Mounted. Fetching employees..."),await s.fetchEmployees(),n.value=!0,console.log("LDDashboardView: Employees fetched. Count:",s.employees.length)});const u=x(()=>s.employees?s.employees.filter(r=>r.learningPath&&(r.learningPath.status==="assigned"||r.learningPath.status==="in_progress")).length:0),c=x(()=>s.employees?s.employees.filter(r=>r.learningPath&&r.learningPath.status==="completed").length:0),p=()=>{console.log("LDDashboardView: openAddEmployeeModal called."),l.value=!0,console.log("LDDashboardView: showAddEmployeeModal is now:",l.value)},_=async()=>{console.log("LDDashboardView: handleEmployeeAdded called (form success)."),l.value=!1,await s.fetchEmployees(),console.log("LDDashboardView: Employees re-fetched after adding.")},f=()=>{console.log("LDDashboardView: closeModal called."),l.value=!1,s.error&&(s.error=null),console.log("LDDashboardView: showAddEmployeeModal is now:",l.value)};return(r,t)=>(o(),a("div",F,[e("header",{class:"flex justify-between items-center"},[t[1]||(t[1]=e("h1",{class:"text-3xl font-bold tracking-tight text-transparent bg-clip-text bg-gradient-to-r from-sky-400 to-cyan-300"}," L&D Dashboard ",-1)),e("button",{onClick:p,class:"btn-intellipath-primary"},t[0]||(t[0]=[e("svg",{class:"w-5 h-5 mr-2 -ml-1",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z","clip-rule":"evenodd"})],-1),b(" Add Employee ")]))]),e("div",q,[e("div",O,[t[2]||(t[2]=e("h3",{class:"text-lg font-medium text-slate-300"},"Total Employees",-1)),e("p",G,d(i(s).employees.length),1),t[3]||(t[3]=e("p",{class:"text-sm text-slate-500 mt-2"},"Managed within IntelliPath",-1))]),e("div",H,[t[4]||(t[4]=e("h3",{class:"text-lg font-medium text-slate-300"},"Paths In Progress",-1)),e("p",J,d(u.value),1),t[5]||(t[5]=e("p",{class:"text-sm text-slate-500 mt-2"},"Active learning journeys",-1))]),e("div",K,[t[6]||(t[6]=e("h3",{class:"text-lg font-medium text-slate-300"},"Completed Paths",-1)),e("p",Q,d(c.value),1),t[7]||(t[7]=e("p",{class:"text-sm text-slate-500 mt-2"},"Successfully finished",-1))])]),e("div",null,[t[10]||(t[10]=e("h2",{class:"text-2xl font-semibold text-slate-200 mb-4"},"Employee Overview",-1)),i(s).isLoading&&!n.value?(o(),a("div",R,t[8]||(t[8]=[e("p",{class:"text-slate-400 animate-pulse"},"Loading employees...",-1)]))):i(s).error&&i(s).employees.length===0?(o(),a("div",U," Error loading employees: "+d(i(s).error),1)):i(s).employees.length===0?(o(),a("div",W,t[9]||(t[9]=[e("p",{class:"text-slate-300 text-lg"},"No employees added yet.",-1),e("p",{class:"text-sm text-slate-500"},'Click "Add Employee" to get started.',-1)]))):(o(),a("div",X,[(o(!0),a(L,null,V(i(s).employees,g=>(o(),A(z,{key:g.id,employee:g,class:"transform hover:scale-[1.02] transition-transform duration-300 ease-out"},null,8,["employee"]))),128))]))]),y(M,{name:"modal-fade"},{default:v(()=>[l.value?(o(),a("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-slate-900/80 backdrop-blur-sm p-4",onClick:P(f,["self"])},[e("div",Y,[y(S,{onSuccess:_,onCancel:f})])])):C("",!0)]),_:1})]))}},le=k(Z,[["__scopeId","data-v-be0ef1d8"]]);export{le as default};
