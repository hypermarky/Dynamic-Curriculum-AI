import{h as f,g as x,q as _,c as s,a as e,u as r,l as k,k as v,e as b,t as m,b as w,d as S,w as P,r as B,B as y,o as a}from"./index-Cm3Rla8a.js";const C={class:"min-h-screen flex flex-col items-center justify-center p-4 bg-slate-900"},M={class:"w-full max-w-lg space-y-6"},L={class:"text-center mb-8"},A=["src"],V={key:0,class:"card-intellipath p-8 text-center"},E={key:1,class:"card-intellipath p-6 md:p-8 space-y-6"},I={key:0,class:"bg-red-500/20 text-red-300 p-4 rounded-lg text-sm mb-4"},N={key:1,class:"text-center space-y-4"},z={class:"text-xl font-semibold text-emerald-400 capitalize"},D=["disabled"],j={key:0,class:"animate-subtle-pulse"},F={key:1},R={key:0,class:"text-red-400 text-xs mt-2"},T={key:2,class:"space-y-6"},U={class:"border-2 border-slate-700 rounded-xl p-6 hover:border-sky-500 transition-colors duration-300 space-y-4"},Y=["disabled"],$={key:0,class:"animate-subtle-pulse"},q={key:1},H={key:0,class:"text-red-400 text-xs mt-2 text-center"},O={class:"text-center mt-4"},W="price_1RPVmb03EWky4HijnDXmtvwY",J={__name:"SubscriptionView",setup(X){const l=f(),i=x(!1),c=x(null),d=x(!1),u=x(null);_(async()=>{!l.user||l.subscriptionStatus===null?await l.checkAuthStatus():l.isAuthenticated&&await l.updateSubscriptionStatus()});const h=async n=>{var t,o;d.value=!0,u.value=null;try{await y.createCheckoutSession(n)}catch(p){console.error("Subscription error:",p),u.value=((o=(t=p.response)==null?void 0:t.data)==null?void 0:o.message)||p.message||"Failed to initiate subscription."}finally{d.value=!1}},g=async()=>{var n,t;i.value=!0,c.value=null;try{await y.createPortalSession()}catch(o){console.error("Portal error:",o),c.value=((t=(n=o.response)==null?void 0:n.data)==null?void 0:t.message)||o.message||"Failed to open customer portal."}finally{i.value=!1}};return(n,t)=>{const o=B("router-link");return a(),s("div",C,[e("div",M,[e("div",L,[e("img",{src:r(k),alt:"IntelliPath Logo",class:"mx-auto h-10 w-auto mb-3"},null,8,A),t[1]||(t[1]=e("h1",{class:"text-3xl font-bold tracking-tight text-transparent bg-clip-text bg-gradient-to-r from-sky-400 to-cyan-300"}," Subscription Management ",-1)),t[2]||(t[2]=e("p",{class:"mt-2 text-sm text-slate-400"},"Manage your IntelliPath access plan.",-1))]),r(l).isLoading?(a(),s("div",V,t[3]||(t[3]=[e("p",{class:"text-slate-300 animate-pulse"},"Loading subscription details...",-1)]))):(a(),s("div",E,[r(l).error?(a(),s("div",I,[e("p",null,[t[4]||(t[4]=e("span",{class:"font-semibold"},"Error:",-1)),b(" "+m(r(l).error),1)])])):v("",!0),r(l).hasActiveSubscription?(a(),s("div",N,[e("div",null,[t[5]||(t[5]=e("p",{class:"text-sm text-slate-400"},"Current Status:",-1)),e("p",z,m(r(l).subscriptionStatus),1)]),t[6]||(t[6]=e("p",{class:"text-sm text-slate-400"}," Manage your billing details, view invoices, or update your subscription through the secure Stripe customer portal. ",-1)),e("button",{onClick:g,class:"btn-intellipath-primary w-full",disabled:i.value},[i.value?(a(),s("span",j,"Opening Portal...")):(a(),s("span",F,"Manage Billing & Subscription"))],8,D),c.value?(a(),s("p",R,m(c.value),1)):v("",!0)])):(a(),s("div",T,[t[8]||(t[8]=e("p",{class:"text-lg text-slate-300 text-center"}," You currently do not have an active IntelliPath subscription. ",-1)),e("div",U,[t[7]||(t[7]=w('<div class="flex justify-between items-center"><h2 class="text-2xl font-semibold text-sky-400">IntelliPath Basic</h2><span class="px-3 py-1 text-xs font-semibold text-teal-300 bg-teal-500/20 rounded-full">Monthly</span></div><p class="text-3xl font-bold text-slate-100"> $29 <span class="text-base font-normal text-slate-400">/ month</span></p><ul class="space-y-2 text-sm text-slate-400"><li class="flex items-center"><svg class="w-4 h-4 mr-2 text-emerald-500" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg> AI-Powered Dynamic Curriculums </li><li class="flex items-center"><svg class="w-4 h-4 mr-2 text-emerald-500" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg> Up to 10 Active Employees </li><li class="flex items-center"><svg class="w-4 h-4 mr-2 text-emerald-500" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg> Basic Analytics &amp; Reporting </li></ul>',3)),e("button",{onClick:t[0]||(t[0]=p=>h(W)),class:"btn-intellipath-primary w-full mt-3",disabled:d.value},[d.value?(a(),s("span",$,"Processing...")):(a(),s("span",q,"Choose Basic Plan"))],8,Y)]),u.value?(a(),s("p",H,m(u.value),1)):v("",!0)])),t[9]||(t[9]=e("p",{class:"mt-6 text-center text-xs text-slate-500"}," Payments are securely processed by our partner, Stripe. ",-1))])),e("div",O,[S(o,{to:"/dashboard",class:"text-sm text-sky-500 hover:text-sky-400 hover:underline transition-colors duration-200"},{default:P(()=>t[10]||(t[10]=[b(" ‚Üê Back to Dashboard ")])),_:1,__:[10]})])])])}}};export{J as default};
